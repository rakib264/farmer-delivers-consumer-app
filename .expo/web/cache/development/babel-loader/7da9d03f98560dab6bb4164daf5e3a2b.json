{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport React, { useEffect, useState } from 'react';\nimport * as Location from 'expo-location';\nimport { OnUpdateLocation } from \"../redux/features/userSlice.js\";\nimport { useDispatch } from 'react-redux';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar screenWidth = Dimensions.get('screen').width;\nvar LandingScreen = function LandingScreen(_ref) {\n  var navigation = _ref.navigation;\n  var dispatch = useDispatch();\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    errMsg = _useState2[0],\n    setErrMsg = _useState2[1];\n  var _useState3 = useState({}),\n    _useState4 = _slicedToArray(_useState3, 2),\n    address = _useState4[0],\n    setAddress = _useState4[1];\n  var _useState5 = useState(\"Waiting for current locations\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    displayAddress = _useState6[0],\n    setDisplayAddress = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    clicked = _useState8[0],\n    setClicked = _useState8[1];\n  var _useState9 = useState(false),\n    _useState10 = _slicedToArray(_useState9, 2),\n    locationServiceEnabled = _useState10[0],\n    setLocationServiceEnabled = _useState10[1];\n  var CheckIfLocationEnabled = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var enabled = yield Location.hasServicesEnabledAsync();\n      if (!enabled) {\n        Alert.alert('Location Service not enabled', 'Please enable your location services to continue', [{\n          text: 'OK'\n        }], {\n          cancelable: false\n        });\n      } else {\n        setLocationServiceEnabled(enabled);\n      }\n    });\n    return function CheckIfLocationEnabled() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var GetCurrentLocation = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      var _yield$Location$reque = yield Location.requestForegroundPermissionsAsync(),\n        status = _yield$Location$reque.status;\n      console.log(status);\n      if (status !== 'granted') {\n        setErrMsg('Permission to access location was denied');\n        Alert.alert('Permission to access location was denied', [{\n          text: 'OK'\n        }], {\n          cancelable: false\n        });\n        return;\n      }\n      var _yield$Location$getCu = yield Location.getCurrentPositionAsync({}),\n        coords = _yield$Location$getCu.coords;\n      if (coords) {\n        var latitude = coords.latitude,\n          longitude = coords.longitude;\n        console.log(latitude, longitude);\n        var addressResponse = yield Location.reverseGeocodeAsync({\n          latitude: latitude,\n          longitude: longitude\n        });\n        for (var item of addressResponse) {\n          console.log(item);\n          var currentAddress = item.street + \" \" + item.district + \" \" + item.city + \" \" + item.country;\n          dispatch(OnUpdateLocation(item));\n          setDisplayAddress(currentAddress);\n          if (currentAddress.length > 0) {\n            setTimeout(function () {\n              navigation.navigate('HomeStack');\n            }, 10000);\n          }\n        }\n      } else {\n      }\n    });\n    return function GetCurrentLocation() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    CheckIfLocationEnabled();\n    GetCurrentLocation();\n  }, []);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(View, {\n      style: styles.navigation\n    }), _jsxs(View, {\n      style: styles.body,\n      children: [_jsx(Image, {\n        source: require(\"../images/farmex_logo.png\"),\n        style: styles.logo\n      }), _jsx(View, {\n        style: styles.deliveryContainer,\n        children: _jsx(Text, {\n          style: styles.deliveryTitle,\n          children: \"Your Delivery Address\"\n        })\n      }), _jsx(Text, {\n        style: styles.deliveryAddress,\n        children: displayAddress\n      })]\n    }), _jsx(View, {\n      style: styles.footer\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: 'white'\n  },\n  navigation: {\n    flex: 2\n  },\n  body: {\n    flex: 9,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  footer: {\n    flex: 1\n  },\n  logo: {\n    width: 150,\n    height: 120\n  },\n  deliveryContainer: {\n    width: screenWidth - 100,\n    padding: 5,\n    borderBottomColor: 'red',\n    borderBottomWidth: 0.5,\n    marginBottom: 10,\n    alignItems: 'center'\n  },\n  deliveryTitle: {\n    fontSize: 22,\n    fontWeight: '700',\n    color: '#707070'\n  },\n  deliveryAddress: {\n    fontSize: 18,\n    fontWeight: '300',\n    color: '#707070'\n  }\n});\nexport default LandingScreen;","map":{"version":3,"names":["React","useEffect","useState","Location","OnUpdateLocation","useDispatch","screenWidth","Dimensions","get","width","LandingScreen","navigation","dispatch","errMsg","setErrMsg","address","setAddress","displayAddress","setDisplayAddress","clicked","setClicked","locationServiceEnabled","setLocationServiceEnabled","CheckIfLocationEnabled","enabled","hasServicesEnabledAsync","Alert","alert","text","cancelable","GetCurrentLocation","requestForegroundPermissionsAsync","status","console","log","getCurrentPositionAsync","coords","latitude","longitude","addressResponse","reverseGeocodeAsync","item","currentAddress","street","district","city","country","length","setTimeout","navigate","styles","container","body","require","logo","deliveryContainer","deliveryTitle","deliveryAddress","footer","StyleSheet","create","flex","backgroundColor","justifyContent","alignItems","height","padding","borderBottomColor","borderBottomWidth","marginBottom","fontSize","fontWeight","color"],"sources":["/Volumes/Redwan/Final/farmex-shop/src/screens/LandingScreen.jsx"],"sourcesContent":["import { View, Text, StyleSheet, Dimensions, Image, Alert  } from 'react-native'\nimport React, { useEffect, useState } from 'react'\nimport * as Location from 'expo-location';\nimport { OnUpdateLocation } from '../redux/features/userSlice.js';\nimport { useDispatch } from 'react-redux';\n\n\nconst screenWidth = Dimensions.get('screen').width;\n\nconst LandingScreen = ({ navigation }) => {\n    const dispatch = useDispatch();\n\n    const [errMsg, setErrMsg] = useState(\"\");\n    const [address, setAddress] = useState({});\n    const [displayAddress, setDisplayAddress] = useState(\"Waiting for current locations\");\n    const [clicked, setClicked] = useState(false);\n    const [locationServiceEnabled, setLocationServiceEnabled] = useState(false);\n\n    const CheckIfLocationEnabled = async () => {\n        let enabled = await Location.hasServicesEnabledAsync();\n    \n        if (!enabled) {\n          Alert.alert(\n            'Location Service not enabled',\n            'Please enable your location services to continue',\n            [{ text: 'OK' }],\n            { cancelable: false }\n          );\n        } else {\n          setLocationServiceEnabled(enabled);\n        }\n      };\n\n      const GetCurrentLocation = async () => {\n        let { status } = await Location.requestForegroundPermissionsAsync();\n        console.log(status)\n        if(status !== 'granted'){\n            setErrMsg('Permission to access location was denied');\n            Alert.alert(\n                'Permission to access location was denied',\n                [{ text: 'OK' }],\n                { cancelable: false }\n              );\n            return;\n        }\n        let { coords } = await Location.getCurrentPositionAsync({});\n        if(coords){\n            const { latitude, longitude } = coords;\n            console.log(latitude, longitude);\n            let addressResponse = await Location.reverseGeocodeAsync({ latitude, longitude });\n\n            for(let item of addressResponse){\n                console.log(item)\n                let currentAddress = `${item.street} ${item.district} ${item.city} ${item.country}`;\n                dispatch(OnUpdateLocation(item));\n                setDisplayAddress(currentAddress);\n                if(currentAddress.length > 0){\n                    setTimeout(() => {\n                        navigation.navigate('HomeStack')\n                    }, 10000)\n                }\n            }\n        } else{\n            //Something went wrong with location data\n        }\n      };\n\n    useEffect(() => {\n\n         CheckIfLocationEnabled();\n         GetCurrentLocation();\n\n    },[])\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.navigation}>\n      </View>\n      <View style={styles.body}>\n          <Image source={require('../images/farmex_logo.png')} style={styles.logo} />\n          <View style={styles.deliveryContainer}>\n              <Text style={styles.deliveryTitle}>Your Delivery Address</Text>\n          </View>\n          <Text style={styles.deliveryAddress}>{displayAddress}</Text>\n          \n      </View>\n      <View style={styles.footer}>\n      </View>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: 'white',\n    },\n    navigation: {\n        flex: 2,\n    },\n    body: {\n        flex: 9,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    footer: {\n        flex: 1,\n    },\n    logo:{\n        width: 150,\n        height: 120\n    },\n    deliveryContainer:{\n        width: screenWidth - 100,\n        padding: 5,\n        borderBottomColor: 'red',\n        borderBottomWidth: 0.5,\n        marginBottom: 10,\n        alignItems: 'center',\n    },\n    deliveryTitle:{\n        fontSize: 22,\n        fontWeight: '700',\n        color: '#707070'\n    },\n    deliveryAddress:{\n        fontSize: 18,\n        fontWeight: '300',\n        color: '#707070'\n    },\n        \n})\n\nexport default LandingScreen"],"mappings":"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"},"metadata":{},"sourceType":"module"}