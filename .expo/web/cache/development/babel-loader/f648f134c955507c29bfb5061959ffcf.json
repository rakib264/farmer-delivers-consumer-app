{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport React, { useEffect, useState } from 'react';\nimport * as Location from 'expo-location';\nimport { OnUpdateLocation } from \"../redux/features/userSlice.js\";\nimport { useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar API_KEY = 'AIzaSyB633qNA9-K8b5KoadIpSuaMVlm62WP310';\nvar screenWidth = Dimensions.get('screen').width;\nvar LandingScreen = function LandingScreen(_ref) {\n  var navigation = _ref.navigation;\n  var dispatch = useDispatch();\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    errMsg = _useState2[0],\n    setErrMsg = _useState2[1];\n  var _useState3 = useState({}),\n    _useState4 = _slicedToArray(_useState3, 2),\n    address = _useState4[0],\n    setAddress = _useState4[1];\n  var _useState5 = useState(\"Waiting for current locations\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    displayAddress = _useState6[0],\n    setDisplayAddress = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    clicked = _useState8[0],\n    setClicked = _useState8[1];\n  var _useState9 = useState(false),\n    _useState10 = _slicedToArray(_useState9, 2),\n    locationServiceEnabled = _useState10[0],\n    setLocationServiceEnabled = _useState10[1];\n  var CheckIfLocationEnabled = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var enabled = yield Location.hasServicesEnabledAsync();\n      if (!enabled) {\n        Alert.alert('Location Service not enabled', 'Please enable your location services to continue', [{\n          text: 'OK'\n        }], {\n          cancelable: false\n        });\n      } else {\n        setLocationServiceEnabled(enabled);\n      }\n    });\n    return function CheckIfLocationEnabled() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var GetCurrentLocation = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var _yield$Location$reque = yield Location.requestForegroundPermissionsAsync(),\n          status = _yield$Location$reque.status;\n        console.log(status);\n        if (status !== 'granted') {\n          setErrMsg('Permission to access location was denied');\n          Alert.alert('Permission to access location was denied', [{\n            text: 'OK'\n          }], {\n            cancelable: false\n          });\n          return;\n        }\n        var _yield$Location$getCu = yield Location.getCurrentPositionAsync({}),\n          coords = _yield$Location$getCu.coords;\n        if (coords) {\n          var latitude = coords.latitude,\n            longitude = coords.longitude;\n          console.log(latitude, longitude);\n\n          var addressResponse = {\n            \"place\": {\n              \"address\": \"House 135, Akram Uddin Molla Road, Hazaribagh Model Town, Jhauchor\",\n              \"address_components\": [{\n                \"house\": \"House 135\",\n                \"place_name\": null,\n                \"road\": \" Akram Uddin Molla Road\"\n              }],\n              \"area\": \"Hazaribagh\",\n              \"area_components\": [{\n                \"area\": \"Hazaribagh\",\n                \"sub_area\": null\n              }],\n              \"city\": \"Dhaka\",\n              \"country\": \"Bangladesh\",\n              \"distance_within_meters\": 17.4902,\n              \"district\": \"Dhaka\",\n              \"division\": \"Dhaka\",\n              \"id\": 853291,\n              \"location_type\": \"Urban\",\n              \"pauroshova\": null,\n              \"postCode\": 1209,\n              \"sub_district\": \"Hazaribagh\",\n              \"union\": null\n            },\n            \"status\": 200\n          };\n          if (addressResponse !== null) {\n\n            var _addressResponse$plac = addressResponse.place,\n              _address = _addressResponse$plac.address,\n              address_components = _addressResponse$plac.address_components,\n              area_components = _addressResponse$plac.area_components,\n              area = _addressResponse$plac.area,\n              city = _addressResponse$plac.city,\n              country = _addressResponse$plac.country,\n              postCode = _addressResponse$plac.postCode;\n            var currentAddress = {\n              address: _address,\n              address_components: address_components,\n              area: area,\n              area_components: area_components,\n              city: city,\n              country: country,\n              postCode: postCode\n            };\n\n            setDisplayAddress(address_components[0].house + \", \" + address_components[0].road + \", \" + area + \", \" + city + \", \" + country + \", \" + postCode);\n            dispatch(OnUpdateLocation(currentAddress));\n            navigation.navigate('HomeStack');\n          }\n        } else {\n        }\n      } catch (err) {}\n    });\n    return function GetCurrentLocation() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    CheckIfLocationEnabled();\n    GetCurrentLocation();\n  }, []);\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(View, {\n      style: styles.navigation\n    }), _jsxs(View, {\n      style: styles.body,\n      children: [_jsx(Image, {\n        source: require(\"../images/farmex_logo.png\"),\n        style: styles.logo\n      }), _jsx(View, {\n        style: styles.deliveryContainer,\n        children: _jsx(Text, {\n          style: styles.deliveryTitle,\n          children: \"Your Delivery Address\"\n        })\n      }), _jsx(Text, {\n        style: styles.deliveryAddress,\n        children: displayAddress\n      })]\n    }), _jsx(View, {\n      style: styles.footer\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: 'white'\n  },\n  navigation: {\n    flex: 2\n  },\n  body: {\n    flex: 9,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  footer: {\n    flex: 1\n  },\n  logo: {\n    width: 150,\n    height: 120\n  },\n  deliveryContainer: {\n    width: screenWidth - 100,\n    padding: 5,\n    borderBottomColor: 'red',\n    borderBottomWidth: 0.5,\n    marginBottom: 10,\n    alignItems: 'center'\n  },\n  deliveryTitle: {\n    fontSize: 22,\n    fontWeight: '700',\n    color: '#707070'\n  },\n  deliveryAddress: {\n    fontSize: 18,\n    fontWeight: '300',\n    color: '#707070'\n  }\n});\nexport default LandingScreen;","map":{"version":3,"names":["React","useEffect","useState","Location","OnUpdateLocation","useDispatch","axios","API_KEY","screenWidth","Dimensions","get","width","LandingScreen","navigation","dispatch","errMsg","setErrMsg","address","setAddress","displayAddress","setDisplayAddress","clicked","setClicked","locationServiceEnabled","setLocationServiceEnabled","CheckIfLocationEnabled","enabled","hasServicesEnabledAsync","Alert","alert","text","cancelable","GetCurrentLocation","requestForegroundPermissionsAsync","status","console","log","getCurrentPositionAsync","coords","latitude","longitude","addressResponse","place","address_components","area_components","area","city","country","postCode","currentAddress","house","road","navigate","err","styles","container","body","require","logo","deliveryContainer","deliveryTitle","deliveryAddress","footer","StyleSheet","create","flex","backgroundColor","justifyContent","alignItems","height","padding","borderBottomColor","borderBottomWidth","marginBottom","fontSize","fontWeight","color"],"sources":["/Volumes/Redwan/Final/farmex-shop/src/screens/LandingScreen.jsx"],"sourcesContent":["import { View, Text, StyleSheet, Dimensions, Image, Alert  } from 'react-native'\nimport React, { useEffect, useState } from 'react'\nimport * as Location from 'expo-location';\nimport { OnUpdateLocation } from '../redux/features/userSlice.js';\nimport { useDispatch } from 'react-redux';\nimport axios from 'axios';\n\n\n\nconst API_KEY = 'AIzaSyB633qNA9-K8b5KoadIpSuaMVlm62WP310'\n\nconst screenWidth = Dimensions.get('screen').width;\n\nconst LandingScreen = ({ navigation }) => {\n    const dispatch = useDispatch();\n\n    const [errMsg, setErrMsg] = useState(\"\");\n    const [address, setAddress] = useState({});\n    const [displayAddress, setDisplayAddress] = useState(\"Waiting for current locations\");\n    const [clicked, setClicked] = useState(false);\n    const [locationServiceEnabled, setLocationServiceEnabled] = useState(false);\n\n    const CheckIfLocationEnabled = async () => {\n        let enabled = await Location.hasServicesEnabledAsync();\n    \n        if (!enabled) {\n          Alert.alert(\n            'Location Service not enabled',\n            'Please enable your location services to continue',\n            [{ text: 'OK' }],\n            { cancelable: false }\n          );\n        } else {\n          setLocationServiceEnabled(enabled);\n        }\n      };\n\n      const GetCurrentLocation = async () => {\n        try{\n            let { status } = await Location.requestForegroundPermissionsAsync();\n        console.log(status)\n        if(status !== 'granted'){\n            setErrMsg('Permission to access location was denied');\n            Alert.alert(\n                'Permission to access location was denied',\n                [{ text: 'OK' }],\n                { cancelable: false }\n              );\n            return;\n        }\n        let { coords } = await Location.getCurrentPositionAsync({});\n        if(coords){\n            const { latitude, longitude } = coords;\n\n            console.log(latitude, longitude);\n\n            // Reverse Geo Address Location\n            // let res = await axios.get(`https://barikoi.xyz/v1/api/search/reverse/NDE4OTpHRThPODNDSVIy/geocode?longitude=${longitude}&latitude=${latitude}&district=true&post_code=true&country=true&sub_district=true&union=true&pauroshova=true&location_type=true&division=true&address=true&area=true&bangla=false`)\n            \n            // console.log(res.data);\n\n            const addressResponse = {\n                \"place\":{\n                   \"address\":\"House 135, Akram Uddin Molla Road, Hazaribagh Model Town, Jhauchor\",\n                   \"address_components\":[\n                    {\"house\": \"House 135\", \"place_name\": null, \"road\": \" Akram Uddin Molla Road\"}\n                   ],\n                   \"area\":\"Hazaribagh\",\n                   \"area_components\":[\n                    {\"area\": \"Hazaribagh\", \"sub_area\": null}\n                   ],\n                   \"city\":\"Dhaka\",\n                   \"country\":\"Bangladesh\",\n                   \"distance_within_meters\":17.4902,\n                   \"district\":\"Dhaka\",\n                   \"division\":\"Dhaka\",\n                   \"id\":853291,\n                   \"location_type\":\"Urban\",\n                   \"pauroshova\":null,\n                   \"postCode\":1209,\n                   \"sub_district\":\"Hazaribagh\",\n                   \"union\":null\n                },\n                \"status\":200\n             }\n\n            if(addressResponse !== null) {\n                // const { address, address_components, area_components, area, city, country, postCode } = res.data.place;\n                // let currentAddress = {\n                //     address: address,\n                //     address_components: address_components,\n                //     area: area,\n                //     area_components: area_components,\n                //     city: city,\n                //     country: country,\n                //     postCode: postCode\n                // }\n\n                const { address, address_components, area_components, area, city, country, postCode } = addressResponse.place;\n\n                let currentAddress = {\n                    address: address,\n                    address_components: address_components,\n                    area: area,\n                    area_components: area_components,\n                    city: city,\n                    country: country,\n                    postCode: postCode\n                }\n                // console.log(currentAddress) \n\n                setDisplayAddress(`${address_components[0].house}, ${address_components[0].road}, ${area}, ${city}, ${country}, ${postCode}`);\n                dispatch(OnUpdateLocation(currentAddress));\n\n                navigation.navigate('HomeStack')\n\n            }\n\n\n        } else{\n            //Something went wrong with location data\n        }\n        }catch(err) {\n\n        }\n      };\n\n    useEffect(() => {\n\n         CheckIfLocationEnabled();\n         GetCurrentLocation();\n\n    },[])\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.navigation}>\n      </View>\n      <View style={styles.body}>\n          <Image source={require('../images/farmex_logo.png')} style={styles.logo} />\n          <View style={styles.deliveryContainer}>\n              <Text style={styles.deliveryTitle}>Your Delivery Address</Text>\n          </View>\n          <Text style={styles.deliveryAddress}>{displayAddress}</Text>\n          \n      </View>\n      <View style={styles.footer}>\n      </View>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: 'white',\n    },\n    navigation: {\n        flex: 2,\n    },\n    body: {\n        flex: 9,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    footer: {\n        flex: 1,\n    },\n    logo:{\n        width: 150,\n        height: 120\n    },\n    deliveryContainer:{\n        width: screenWidth - 100,\n        padding: 5,\n        borderBottomColor: 'red',\n        borderBottomWidth: 0.5,\n        marginBottom: 10,\n        alignItems: 'center',\n    },\n    deliveryTitle:{\n        fontSize: 22,\n        fontWeight: '700',\n        color: '#707070'\n    },\n    deliveryAddress:{\n        fontSize: 18,\n        fontWeight: '300',\n        color: '#707070'\n    },\n        \n})\n\nexport default LandingScreen"],"mappings":"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"},"metadata":{},"sourceType":"module"}